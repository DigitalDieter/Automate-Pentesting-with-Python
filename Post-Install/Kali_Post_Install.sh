#!/bin/bash
# A menu driven shell script sample template
## ----------------------------------
# Step #1: Define variables
# ----------------------------------

## Bash colours
GREEN="\033[01;32m"
YELLOW="\033[01;33m"
BLUE="\033[01;34m"
BOLD="\033[01;01m"
RED="\033[01;31m"
RESET="\033[00m"


myuser=$(whoami)
EDITOR=vim
PASSWD=/etc/passwd
STD='\033[0;0;39m'
TOOLS_ROOT="/home/kali/tools/"
SUB_DIR="wifi"
SUB_DIR2="android"
IDE_SUB="IDE"
INSTALL_DIR=$TOOLS_ROOT/$SUB_DIR


#!/bin/bash
if [[ $EUID -ne 0 ]]; then
    echo "Please run this script with sudo:"
    echo -e "\n${RED}Please run this script with sudo ${RESET} "
    echo "sudo $0 $*"
    exit 1
fi
# -------------------------------------------------------------------------------------------------
create_tools_folders() {
	mkdir -p tools/{android,sdr,exploit,web/xss}
}
# -------------------------------------------------------------------------------------------------
create_tools_root() {
  if [ -d "$TOOLS_ROOT" ]; then
    ### Take action if $DIR exists ###
    echo -e "\n tools root directory already exists "
  else
    ###  Control will jump here if $DIR does NOT exists ###
	echo -e "\nCreating tools root directory ${GREEN} $TOOLS_ROOT ${RESET}"
    mkdir $TOOLS_ROOT
  fi
}
# -------------------------------------------------------------------------------------------------
create_sub_dir() {
  if [ -d "$TOOLS_ROOT_DIR/$SUB_DIR" ]; then
    echo "Installing config files in ${DIR}..."
  else
    ###  Control will jump here if $DIR does NOT exists ###
	echo -e "\nCreating tools sub directory ${GREEN} $SUB_DIR ${RESET} "
    mkdir $TOOLS_ROOT/$SUB_DIR

fi
}
# -------------------------------------------------------------------------------------------------
create_sub_dir2() {
  if [ -d "$TOOLS_ROOT_DIR/$SUB_DIR" ]; then
    echo "Installing config files in ${DIR}..."
  else
    ###  Control will jump here if $DIR does NOT exists ###
	echo -e "\nCreating tools sub directory ${GREEN} $SUB_DIR2 ${RESET} "
    mkdir $TOOLS_ROOT/$SUB_DIR2

fi
}
# -------------------------------------------------------------------------------------------------
sub_dir_ide() {
  if [ -d "$TOOLS_ROOT_DIR/$IDE_SUB" ]; then
    echo "Installing config files in ${IDE_SUB}..."
  else
    ###  Control will jump here if $DIR does NOT exists ###
	echo -e "\nCreating tools sub directory ${GREEN} $SUB_DIR ${RESET} "
    mkdir $TOOLS_ROOT/$IDE_SUB

fi
}


basic_software(){
 sudo apt -y install python-pip python3-pip apt-transport-https ca-certificates curl gnupg-agent software-properties-commonls

}

# Step #2: User defined function
# ----------------------------------
pause(){
  read -p "Press [Enter] key to continue..." fackEnterKey
}

one(){
	echo "enabeling ssh"
        systemctl start ssh
        systemctl enable ssh
        pause
}
# do something in two()
two(){
	echo "enable autologin"
        sed -i s/#autologin-user=/autologin-user=kali/g /etc/lightdm/lightdm.conf
        sed -i s/#autologin-user-timeout=0/autologin-user-timeout=0/g /etc/lightdm/lightdm.conf
        pause
}
# -------------------------------------------------------------------------------------------------
tree (){
	echo "Create tor user  autologin"
		apt -y install tor
	    adduser --gecos "" toruser
		touch /etc/sudoers.d/toruser
		cp toruser /etc/sudoers.d/
        pause
}
# -------------------------------------------------------------------------------------------------
four(){
	echo "Disable IPv6 GRUB"
	    	sed -ie 's/GRUB_CMDLINE_LINUX_DEFAULT="\(.*\)"/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash ipv6.disable=1"/g' /etc/default/grub
		    sed -ie 's/GRUB_CMDLINE_LINUX="\(.*\)"/GRUB_CMDLINE_LINUX="ipv6.disable=1"/g'  /etc/default/grub
        update-grub
		pause
}

# -------------------------------------------------------------------------------------------------
five(){
	echo -e "\nInstall bluetooth tools"
		apt -y install kali-tools-bluetooth	bluetooth bluez libbluetooth-dev libudev-dev
		pause
}
# -------------------------------------------------------------------------------------------------
six(){
	echo -e "\nInstall sdr tools"
		apt update
		apt -y install kali-tools-sdr
		pause
}
# -------------------------------------------------------------------------------------------------
seven(){
	echo -e "\nInstall wireless tools"
		apt -y install kali-tools-wireless
		pause
}
# -------------------------------------------------------------------------------------------------
eight(){
	echo -e "\nInstall powershell-empire"
		apt -y install powershell-empire
		pause
}

# -------------------------------------------------------------------------------------------------
nine(){
	echo -e "\nInstall nvm"
		curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.35.3/install.sh | sh
		pause
}

ten(){
	echo -e "\nInstall Python Mgmt"
		curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | sh

		pause

# Load pyenv automatically by adding
# the following to ~/.bashrc:

#export PATH="/home/kali/.pyenv/bin:$PATH"
#eval "$(pyenv init -)"
#eval "$(pyenv virtualenv-init -)"


}



# -------------------------------------------------------------------------------------------------
#


thirty(){
	echo -e "\nInstall cairo-dock"
		apt --fix-broken install -y
		apt -y install cairo-dock
    myuser=$(whoami)
		mkdir -p /home/$myuser/.config/autostart
		cp autostart_cairo-dock.desktop /home/$myuser/.config/autostart/
		pause
}
# -------------------------------------------------------------------------------------------------
thirty-one(){
	echo "install atom editor"
		wget https://atom.io/download/deb -O atom.deb
		dpkg -i atom.deb
		pause
}
# -------------------------------------------------------------------------------------------------
thirty-two(){
	echo "install pycharm ide"
		sub_dir_ide
		cd $TOOLS_ROOT/$IDE_SUB
		wget https://download-cf.jetbrains.com/python/pycharm-community-2020.2.tar.gz
		tar -xzvf pycharm-community-2020.2.tar.gz

}
# -------------------------------------------------------------------------------------------------
thirty-tree(){
	echo "install android studio"
		sub_dir_ide
		cd $TOOLS_ROOT/$IDE_SUB
		wget https://redirector.gvt1.com/edgedl/android/studio/ide-zips/4.0.1.0/android-studio-ide-193.6626763-linux.tar.gz
		tar -xzvf android-studio-ide-193.6626763-linux.tar.gz

}
thirty-five(){
	create_sub_dir2
	echo "install Mobile-Security-Framework-MobSF"
		cd $TOOLS_ROOT/$SUB_DIR
		git clone https://github.com/MobSF/Mobile-Security-Framework-MobSF.git
		cd Mobile-Security-Framework-MobSF
		curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | sh
		pyenv exec python pyshark.py
		pyenv install 3.7.0 && pyenv global 3.7.0
		pyenv exec python -m pip install --upgrade pip
		pyenv exec python -m pip install -r requirements.txt

		apt -y install python3-dev python3-venv python3-pip build-essential libffi-dev libssl-dev libxml2-dev libxslt1-dev zlib1g-dev wkhtmltopdf




}
# -------------------------------------------------------------------------------------------------
# function to display menus
show_menus() {
	clear
	echo "~~~~~~~~~~~~~~~~~~~~~"
	echo " M A I N - M E N U"
	echo "~~~~~~~~~~~~~~~~~~~~~"
	echo -e "${BLUE}Configuration${RESET}"
	echo "1. Enable ssh service"
	echo "2. Enable autologin kali user"
	echo "3. Create tor user (execute tor without password)"
	echo "4. Disable ipv6 (update-grub)"
	echo -e "${BLUE}Additional tools${RESET}"
	echo "4. Install bluetooth tools"
	echo "5. Install sdr tools"
	echo "6. Install wireless tools"
	echo -e "${BLUE}Additional software${RESET}"
	echo "30. Install cairo-dock"
	echo "31. Install Atom Editor"
	echo "32. Install Pycharm IDE"
	echo "33. Install Android Studio"

	echo "99. Exit"
}
# read input from the keyboard and take a action

read_options(){
	local choice
	read -p "Enter choice [ 1 - 99] 99 for exit  " choice
	case $choice in
		1) one ;;
		2) two ;;
   # 3) tree ;;
		4) four ;;
		5) five ;;
		6) six ;;
		7) seven ;;
		30) thirty ;;
		31) thirty-one ;;
		32) thirty-two ;;
		33) thirty-three ;;

		99) exit 0;;
		*) echo -e "${RED}Error...${STD}" && sleep 2
	esac
}

# ----------------------------------------------
# Step #3: Trap CTRL+C, CTRL+Z and quit singles
# ----------------------------------------------
trap '' SIGINT SIGQUIT SIGTSTP

# -----------------------------------
# Step #4: Main logic - infinite loop
# ------------------------------------
while true
do

	show_menus
	read_options
done





mkdir -p {.config/autostart}
}